{% extends "base.html" %}
{% block content %}
{% load filter_tags %}

<div class="row">
<div class="col-md-4">
Filters:
{% for type, values in mappings.mappings.items %}
    <div class="panel panel-info">
    <div class="panel-heading">
    	<h3 class="panel-title">{{ type }}</h3>
	</div>
	<div class="panel-body">
	{% for para, para_type in values.properties.items %}
	    {% if para_type.properties %}
	        <div class="form-group">
	    	{{ para }}:
	    	{% for subpara, subpara_type in para_type.properties.items %}
	    			<label class="checkbox-inline">&nbsp;&nbsp;&nbsp;&nbsp;
	    			<input type="checkbox" name="{{ subpara }}" value="{{ type }}:{{ para }}:{{ subpara }}"
	    				{% if para.subpara in fields or para|add:"."|add:subpara in fields %}checked{% endif %}>{{ subpara }}</label>
	    	{% endfor %}
	    	</div>
	    {% elif "string" == para_type.type %}
	        <div class="checkbox">
	    		<label><input type="checkbox" name="{{ para }}" value="{{ type }}:{{ para }}" 
	    			{% if para in fields %}checked{% endif %}>{{ para }}</label>
	    	</div>
        {% endif %}
	{% endfor %}
	</div>
	</div>
{% endfor %}
</div>

<div class="col-md-8">
{{ data|length }} of {{ hits_total }} hit(s) for '{{ query }}':

{% for doc in data %}
	<div class="panel panel-default">
  	<div class="panel-body">
  	<span class="badge">{{ doc|doc_type }}</span><br/>
	{% for key in doc|doc_keys %}
		{% if key != "_meta" %}
		    {{ key }}:
			{{ doc|doc_attr:key }};
		{% endif %}
	{% endfor %}
	<br/>Matches: {{ doc|doc_highlight|safe }}<br/>
	<a href="{{ doc|doc_link|safe }}" target="_blank">details <span class="glyphicon glyphicon-new-window" aria-hidden="true"></span></a>
	</div>
	</div>
{% endfor %}
</div>
</div>

{% endblock %}
